language: node_js
sudo: true
install:
  - curl -sSL https://raw.githubusercontent.com/aspnet/Home/dev/dnvminstall.sh | DNX_BRANCH=dev sh && source ~/.dnx/dnvm/dnvm.sh
  - dnvm upgrade -r coreclr
  - curl -sSL https://github.com/libuv/libuv/archive/v1.4.2.tar.gz | sudo tar zxfv - -C /usr/local/src
  - cd /usr/local/src/libuv-1.4.2
  - sudo sh autogen.sh
  - sudo ./configure
  - sudo make
  - sudo make install
  - sudo rm -rf /usr/local/src/libuv-1.4.2 && cd ~/
  - sudo ldconfig
script:
  - dnu restore
  - dnx -p UnitTests/project.json test
  - dnx -p IntranetGJAK/project.json web
addons:
  apt:
    packages:
    - cmake
    - unzip
    - curl
    - libunwind8
    - gettext
    - libssl-dev
    - zlib1g
    - libicu-dev
    - make
    - automake
    - libtool