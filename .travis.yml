language: node_js
sudo: false
install:
  - curl -sSL https://raw.githubusercontent.com/aspnet/Home/dev/dnvminstall.sh | DNX_BRANCH=dev sh && source ~/.dnx/dnvm/dnvm.sh
  - dnvm upgrade -r coreclr
  - mkdir src
  - curl -sSL https://github.com/libuv/libuv/archive/v1.4.2.tar.gz | tar zxfv - -C src
  - cd src/libuv-1.4.2
  - sh autogen.sh
  - ./configure
  - make
  - make install
  - rm -rf src/libuv-1.4.2
  - cd ..
  - ldconfig
script:
  - dnu restore
  - dnx -p UnitTests/project.json test
  - dnx -p IntranetGJAK/project.json web
addons:
  apt:
    packages:
    - cmake
    - unzip
    - curl
    - libunwind8
    - gettext
    - libssl-dev
    - zlib1g
    - libicu-dev
    - make
    - automake
    - libtool